https://leetcode.com/explore/learn/card/linked-list/213/conclusion/1225
### Условие
Вам дан двусвязный список, содержащий узлы с указателями на следующий и предыдущий элементы, а также дополнительный указатель на дочерний элемент. Этот указатель на дочерний элемент может указывать на отдельный двусвязный список, также содержащий эти особые элементы, а может и не указывать. Эти дочерние элементы могут иметь один или несколько дочерних элементов и так далее, создавая многоуровневую структуру данных, как показано в примере ниже.

Дан заголовок первого уровня списка, выравниваем список так, чтобы все узлы были представлены в одноуровневом двусвязном списке. Пусть curr — узел с дочерним списком. Узлы дочернего списка должны располагаться после curr и перед curr.next в выравниваемом списке.

Возвращает заголовок сглаженного списка. Все дочерние указатели узлов в списке должны быть установлены в значение NULL.

 
### Пример

![[Pasted image 20250805180015.png]]
**Ввод:** head = [1,2,3,4,5,6,null,null,null,7,8,9,10,null,null,11,12]
**Выход:** [1,2,3,7,8,11,12,9,10,4,5,6]
### Решение

```go
func flatten(root *Node) *Node {
    p := root
    for p != nil {
        if p.Child != nil {
            next := p.Next
            p.Next = p.Child
            p.Next.Prev = p
            p.Child = nil
            r := p
            for r.Next != nil {
                r = r.Next
            }
            r.Next = next
            if r.Next != nil {
                r.Next.Prev = r
            }
        }
        p = p.Next
    }
    return root
}
```

### Принцип

![[Pasted image 20250805180149.png]]