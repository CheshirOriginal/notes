[Deque](https://en.wikipedia.org/wiki/Double-ended_queue) расшифровывается как double-ended queue (двусторонняя очередь).

Если вектор располагает элементы в памяти непрерывно, то [`std::deque`](https://en.cppreference.com/w/cpp/container/deque) располагает их кусочно-непрерывно, в отдельных _страницах_ (непрерывных блоках) памяти фиксированного размера. Но даже для хранения одного элемента в деке будет выделена целая страница. Сами страницы не обязательно расположены в памяти подряд. Отдельно поддерживается перечень указателей на начала страниц. Размеры страниц зависят от `sizeof(T)` и от конкретной реализации дека. Например, для `std::deque<int>` они могут занимать 4 килобайта.

![[Pasted image 20251007201638.png]]

==Дек умеет эффективно добавлять и удалять элементы в начале и в конце==: это приводит к выделению новой страницы при необходимости. Вставка по краям в деке эффективнее, чем в векторе, так как реаллокаций нет и старые элементы никогда не приходится копировать. В отличие от вектора, дек гарантирует, что при вставке или удалении по краям элементы останутся в тех же самых ячейках памяти, что и были. Вставка в середину дека и удаление из неё уже требуют сдвига элементов.

Как и вектор, дек поддерживает обращение к элементу по индексу за O(1): так как размер страниц фиксирован и начальная позиция в первой странице известна, то можно легко вычислить нужную страницу и позицию в ней. Однако для обращения к элементу деку приходится делать два разыменования указателей, а вектору — только одно.

```c++
#include <deque>
#include <iostream>

int main() {
    std::deque<int> d = {1, 2, 3, 4};

    d.push_back(5);  // добавление в конец, как у вектора
    d.push_back(6);
    d.pop_back();  // удаление из конца, как у вектора

    d.push_front(0);  // добавление в начало
    d.push_front(-1);
    d.pop_front();  // удаление из начала

    // элементы дека: 0, 1, 2, 3, 4, 5

    // обращение по индексам:
    for (size_t i = 0; i != d.size(); ++i) {
        std::cout << d[i] << "\n";
    }

    // range-based for:
    for (int x : d) {
        std::cout << x << "\n";
    }
}
```